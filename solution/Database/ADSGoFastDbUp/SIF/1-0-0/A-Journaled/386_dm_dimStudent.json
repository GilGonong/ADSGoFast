{
	"name": "386_dm_dimStudent",
	"properties": {
		"content": {
			"query": "--DROP VIEW IF EXISTS [dm].[dimStudent]\nCREATE VIEW [dm].[dimStudent]\nAS\nSELECT\n\t[RefId] as StudentKey\n\t, [LocalId] as StudentId\n\t, [StateProvinceId]\n\t, [NationalUniqueStudentIdentifier]\n\t, cast(json_value([AlertMessages],'$.AlertMessage[0].Type') as varchar(255)) AlertMessageType1\n\t, cast(json_value([AlertMessages],'$.AlertMessage[0].value') as varchar(255)) AlertMessageValue1\n\t, cast(json_value([AlertMessages],'$.AlertMessage[1].Type') as varchar(255)) AlertMessageType2\n\t, cast(json_value([AlertMessages],'$.AlertMessage[1].value') as varchar(255)) AlertMessageValue2\n\t, cast(json_value([MedicalAlertMessages],'$.MedicalAlertMessage[0].Severity') as varchar(255))MedicalAlertMessageSeverity1\n\t, cast(json_value([MedicalAlertMessages],'$.MedicalAlertMessage[0].value') as varchar(1000)) MedicalAlertMessageValue1\n\t, cast(json_value([MedicalAlertMessages],'$.MedicalAlertMessage[1].Severity') as varchar(255)) MedicalAlertMessageSeverity2\n\t, cast(json_value([MedicalAlertMessages],'$.MedicalAlertMessage[1].value') as varchar(1000)) MedicalAlertMessageValue2\n\t, [FirstName]       \n\t, [LastName]        \n\t, [MiddleName]\n\t, [FirstName] + ISNULL([MiddleName], ' ') + [LastName] AS [StudentName]\n\t, cast(json_value([OtherNames],'$.Name[0].Type') as varchar(255)) OtherNameType1\n\t, cast(json_value([OtherNames],'$.Name[0].FamilyName') as varchar(255)) OtherNameFamilyName1\n\t, cast(json_value([OtherNames],'$.Name[0].GivenName') as varchar(255)) OtherNameGivenName1\n\t, cast(json_value([OtherNames],'$.Name[0].FullName') as varchar(255)) OtherNameFullName1\n\t, cast(json_value([OtherNames],'$.Name[1].Type') as varchar(255)) OtherNameType2\n\t, cast(json_value([OtherNames],'$.Name[1].FamilyName') as varchar(255)) OtherNameFamilyName2\n\t, cast(json_value([OtherNames],'$.Name[1].GivenName') as varchar(255)) OtherNameGivenName2\n\t, cast(json_value([OtherNames],'$.Name[1].FullName') as varchar(255)) OtherNameFullName2\n\t, cast([ProjectedGraduationYear] as numeric(4,0)) ProjectedGraduationYear\n\t, cast([OnTimeGraduationYear] as numeric(4,0)) OnTimeGraduationYear\n\t, cast([GraduationDate]  as date) GraduationDate\n\t, cast(json_value([MostRecent],'$.SchoolLocalId') as varchar(255)) MostRecentSchoolLocalId\n\t, cast(json_value([MostRecent],'$.HomeroomLocalId') as varchar(255)) MostRecentHomeroomLocalId\n\t, cast(json_value([MostRecent],'$.YearLevel.Code') as varchar(255)) MostRecentYearLevel\n\t, cast(json_value([MostRecent],'$.FTE') as varchar(255)) MostRecentFTE\n\t, cast(json_value([MostRecent],'$.Parent1Language') as varchar(255)) MostRecentParent1Language\n\t, cast(json_value([MostRecent],'$.Parent2Language') as varchar(255)) MostRecentParent2Language\n\t, cast(json_value([MostRecent],'$.LocalCampusId') as varchar(255)) MostRecentLocalCampusId\n\t, cast(json_value([MostRecent],'$.SchoolACARAId') as varchar(255)) MostRecentSchoolACARAId\n\t, cast(json_value([MostRecent],'$.Homegroup') as varchar(255)) MostRecentHomegroup\n\t, cast(json_value([MostRecent],'$.ClassCode') as varchar(255)) MostRecentClassCode\n\t, cast(json_value([MostRecent],'$.MembershipType') as varchar(255)) MostRecentMembershipType\n\t, cast(json_value([MostRecent],'$.FFPOS') as varchar(255)) MostRecentFFPOS\n\t, cast(json_value([MostRecent],'$.ReportingSchoolId') as varchar(255)) MostRecentReportingSchoolId\n\t, cast(json_value([MostRecent],'$.OtherEnrollmentSchoolACARAId') as varchar(255)) MostRecentOtherEnrollmentSchoolACARAId\n\t, [AcceptableUsePolicy]\n\t, [GiftedTalented]\n\t, [EconomicDisadvantage]\n\t, [ESL]\n\t, cast([ESLDateAssessed] as date) ESLDateAssessed\n\t, [YoungCarersRole]\n\t, [Disability]\n\t, [IntegrationAide]\n\t, [EducationSupport]\n\t, [HomeSchooledStudent]\n\t, [IndependentStudent]\n\t, [Sensitive]\n\t, [OfflineDelivery]\n\t, [ESLSupport]\n\t, [PrePrimaryEducation]\n\t, [PrePrimaryEducationHours]\n\t, cast([FirstAUSchoolEnrollment] as date) FirstAUSchoolEnrollment\n\t, cast(json_value([EmailList],'$.Email[0].Type') as varchar(2)) as TypeEmail1Description\n\t, cast(json_value([EmailList],'$.Email[0].value') as varchar(50)) as TypeEmail1\n\t, cast(json_value([EmailList],'$.Email[1].Type') as varchar(2)) as TypeEmail2Description\n\t, cast(json_value([EmailList],'$.Email[1].value') as varchar(50)) as TypeEmail2\n\t, cast(json_value([PhoneNumberList],'$.PhoneNumber[0].Type') as varchar(2)) as Telephone1TypeDescription\n\t, cast(json_value([PhoneNumberList],'$.PhoneNumber[0].Number') as varchar(50)) as Telephone1\n\t, cast(json_value([PhoneNumberList],'$.PhoneNumber[1].Type') as varchar(2)) as Telephone2TypeDescription\n\t, cast(json_value([PhoneNumberList],'$.PhoneNumber[1].Number') as varchar(50)) as Telephone2\n\t, cast([IndigenousStatus] as smallint) as [IndigenousStatus]\n\t, [Sex]\n\t, cast([BirthDate] as date) as [BirthDate]\n\t, cast([DateOfDeath] as date) as [DateOfDeath]\n\t, [Deceased]\n\t, [BirthDateVerification]\n\t, [PlaceOfBirth]\n\t, [StateOfBirth]\n\t, [CountryOfBirth]\n\t, cast(json_value([CountryOfCitizenship],'$.CountryOfCitizenship[0]') as varchar(50)) CountryOfCitizenship\n\t, cast(json_value([CountryOfCitizenship],'$.CountryOfCitizenship[1]') as varchar(50)) CountryOfCitizenship2\n\t, cast(json_value([CountryOfResidency],'$.CountryOfResidency[0]') as varchar(50)) CountryOfResidency\n\t, cast(json_value([CountryOfResidency],'$.CountryOfResidency[1]') as varchar(50)) CountryOfResidency2\n\t, cast([CountryArrivalDate] as date) as [CountryArrivalDate]\n\t, [AustralianCitizenshipStatus]\n\t, cast([EnglishProficiency] as smallint) as [EnglishProficiency]\n\t, cast(json_value([LanguageList],'$.Language[0].Code') as varchar(50)) as MainLanguageSpokenAtHome\n\t, cast(json_value([LanguageList],'$.Language[1].Code') as varchar(50)) as SecondLanguage\n\t, cast(json_value([LanguageList],'$.Language[2].Code') as varchar(50)) as OtherLanguage\n\t, [DwellingArrangement]\n\t, [Religion]\n\t, cast(json_value([ReligiousEventList],'$.ReligiousEvent[0].Type') as varchar(50)) as ReligionEvent1\n\t, cast(json_value([ReligiousEventList],'$.ReligiousEvent[0].Date') as date) as ReligionEvent1Date\n\t, cast(json_value([ReligiousEventList],'$.ReligiousEvent[1].Type') as varchar(50)) as ReligionEvent2\n\t, cast(json_value([ReligiousEventList],'$.ReligiousEvent[1].Date') as date) as ReligionEvent2Date\n\t, cast(json_value([ReligiousEventList],'$.ReligiousEvent[2].Type') as varchar(50)) as ReligionEvent3\n\t, cast(json_value([ReligiousEventList],'$.ReligiousEvent[2].Date') as date) as ReligionEvent3Date\n\t, [ReligiousRegion]\n\t, [PermanentResident]\n\t, [VisaSubClass]\n\t, [VisaStatisticalCode]\n\t, cast(json_value(VisaSubClassList,'$.VisaSubClass[0].VisaNumber') as varchar(255)) as VisaNumber\n\t, cast(json_value(VisaSubClassList,'$.VisaSubClass[0].VisaGrantDate') as date) as VisaGrantDate\n\t, cast(json_value(VisaSubClassList,'$.VisaSubClass[0].VisaExpiryDate') as date) as VisaExpiryDate\n\t, cast(json_value(VisaSubClassList,'$.VisaSubClass[0].VisaConditions') as varchar(255)) as VisaConditions\n\t, cast(json_value(VisaSubClassList,'$.VisaSubClass[0].VisaStudyEntitlement') as varchar(255)) as VisaStudyEntitlement\n\t, cast(json_value(VisaSubClassList,'$.VisaSubClass[0].ATEExpiryDate') as date) as ATEExpiryDate\n\t, cast(json_value(VisaSubClassList,'$.VisaSubClass[0].ATEStartDate') as date) as ATEStartDate\n\t, cast(json_value(PassportList,'$.Number') as varchar(20)) as PassportNumber\n\t, cast(json_value(PassportList,'$.ExpiryDate') as date) as PassportExpiryDate\n\t, cast(json_value(PassportList,'$.Country') as varchar(20)) as PassportCountry\n\t, [LBOTE]\n\t, [InterpreterRequired]\n\t, [ImmunisationCertificateStatus]\n\t, [CulturalBackground]\n\t, [MaritalStatus]\n\t, cast([MedicareNumber] as numeric(12,0)) MedicareNumber\n\t, cast([MedicarePositionNumber] as numeric(1,0)) MedicarePositionNumber\n\t, [MedicareCardHolderName]\n\t, [PrivateHealthInsurance]\n\t, cast(json_value([AddressList],'$.Address[0].Type') as varchar(50)) as AddressType1\n\t, cast(json_value([AddressList],'$.Address[0].Role') as varchar(50)) as AddressRole1\n\t, cast(json_value([AddressList],'$.Address[0].Street.Line1') as varchar(255)) as AddressStreet1Line1\n\t, cast(json_value([AddressList],'$.Address[0].Street.Line2') as varchar(255)) as AddressStreet1Line2\n\t, cast(json_value([AddressList],'$.Address[0].City') as varchar(255)) as AddressCity1\n\t, cast(json_value([AddressList],'$.Address[0].StateProvince') as varchar(255)) as AddressStateProvince1\n\t, cast(json_value([AddressList],'$.Address[0].Country') as varchar(255)) as AddressCountry1\n\t, cast(json_value([AddressList],'$.Address[0].PostalCode') as varchar(255)) as AddressPostalCode1\n\t, cast(json_value([AddressList],'$.Address[1].Type') as varchar(50)) as AddressType2\n\t, cast(json_value([AddressList],'$.Address[1].Role') as varchar(50)) as AddressRole2\n\t, cast(json_value([AddressList],'$.Address[1].Street.Line1') as varchar(255)) as AddressStreet2Line1\n\t, cast(json_value([AddressList],'$.Address[1].Street.Line2') as varchar(255)) as AddressStreet2Line2\n\t, cast(json_value([AddressList],'$.Address[1].City') as varchar(255)) as AddressCity2\n\t, cast(json_value([AddressList],'$.Address[1].StateProvince') as varchar(255)) as AddressStateProvince2\n\t, cast(json_value([AddressList],'$.Address[1].Country') as varchar(255)) as AddressCountry2\n\t, cast(json_value([AddressList],'$.Address[1].PostalCode') as varchar(255)) as AddressPostalCode2\nFROM [dbo].[vw_StudentPersonal];\n\n\nGO\n\n\n",
			"metadata": {
				"language": "sql"
			},
			"currentConnection": {
				"databaseName": "sif2",
				"poolName": "Built-in"
			},
			"resultLimit": 5000
		},
		"type": "SqlQuery"
	}
}