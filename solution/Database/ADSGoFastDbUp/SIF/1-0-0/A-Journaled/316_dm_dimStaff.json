{
	"name": "316_dm_dimStaff",
	"properties": {
		"content": {
			"query": "--DROP VIEW IF EXISTS [dm].[dimStaff]\nCREATE VIEW [dm].[dimStaff]\nAS\nSELECT\n\t[RefId] as StaffKey\n\t, [LocalId] as StaffId\n\t, [StateProvinceId]\n\t, [FirstName]       \n\t, [LastName]        \n\t, [MiddleName]  \n\t, [FirstName] + ISNULL([MiddleName], ' ') + [LastName] AS [StaffName]      \n\t, [Title]\n\t, cast(json_value([OtherNames],'$.Name[0].Type') as varchar(255)) OtherNameType1\n\t, cast(json_value([OtherNames],'$.Name[0].FamilyName') as varchar(255)) OtherNameFamilyName1\n\t, cast(json_value([OtherNames],'$.Name[0].GivenName') as varchar(255)) OtherNameGivenName1\n\t, cast(json_value([OtherNames],'$.Name[0].FullName') as varchar(255)) OtherNameFullName1\n\t, cast(json_value([OtherNames],'$.Name[1].Type') as varchar(255)) OtherNameType2\n\t, cast(json_value([OtherNames],'$.Name[1].FamilyName') as varchar(255)) OtherNameFamilyName2\n\t, cast(json_value([OtherNames],'$.Name[1].GivenName') as varchar(255)) OtherNameGivenName2\n\t, cast(json_value([OtherNames],'$.Name[1].FullName') as varchar(255)) OtherNameFullName2\n\t, [EmploymentStatus]\n\t, cast([IndigenousStatus] as smallint) as [IndigenousStatus]\n\t, [Sex]\n\t, cast([BirthDate] as date) as [BirthDate]\n\t, cast([DateOfDeath] as date) as [DateOfDeath]\n\t, [Deceased]\n\t, [BirthDateVerification]\n\t, [PlaceOfBirth]\n\t, [StateOfBirth]\n\t, [CountryOfBirth]\n\t, cast(json_value([CountryOfCitizenship],'$.CountryOfCitizenship[0]') as varchar(50)) CountryOfCitizenship\n\t, cast(json_value([CountryOfCitizenship],'$.CountryOfCitizenship[1]') as varchar(50)) CountryOfCitizenship2\n\t, cast(json_value([CountryOfResidency],'$.CountryOfResidency[0]') as varchar(50)) CountryOfResidency\n\t, cast(json_value([CountryOfResidency],'$.CountryOfResidency[1]') as varchar(50)) CountryOfResidency2\n\t, cast([CountryArrivalDate] as date) as [CountryArrivalDate]\n\t, [AustralianCitizenshipStatus]\n\t, cast([EnglishProficiency] as smallint) as [EnglishProficiency]\n\t, cast(json_value([LanguageList],'$.Language[0].Code') as varchar(50)) as MainLanguageSpokenAtHome\n\t, cast(json_value([LanguageList],'$.Language[1].Code') as varchar(50)) as SecondLanguage\n\t, cast(json_value([LanguageList],'$.Language[2].Code') as varchar(50)) as OtherLanguage\n\t, [DwellingArrangement]\n\t, [Religion]\n\t, cast(json_value([ReligiousEventList],'$.ReligiousEvent[0].Type') as varchar(50)) as ReligionEvent1\n\t, cast(json_value([ReligiousEventList],'$.ReligiousEvent[0].Date') as date) as ReligionEvent1Date\n\t, cast(json_value([ReligiousEventList],'$.ReligiousEvent[1].Type') as varchar(50)) as ReligionEvent2\n\t, cast(json_value([ReligiousEventList],'$.ReligiousEvent[1].Date') as date) as ReligionEvent2Date\n\t, cast(json_value([ReligiousEventList],'$.ReligiousEvent[2].Type') as varchar(50)) as ReligionEvent3\n\t, cast(json_value([ReligiousEventList],'$.ReligiousEvent[2].Date') as date) as ReligionEvent3Date\n\t, [ReligiousRegion]\n\t, [PermanentResident]\n\t, [VisaSubClass]\n\t, [VisaStatisticalCode]\n\t, cast(json_value([AddressList],'$.Address[0].Type') as varchar(50)) as AddressType1\n\t, cast(json_value([AddressList],'$.Address[0].Role') as varchar(50)) as AddressRole1\n\t, cast(json_value([AddressList],'$.Address[0].Street.Line1') as varchar(255)) as AddressStreet1Line1\n\t, cast(json_value([AddressList],'$.Address[0].Street.Line2') as varchar(255)) as AddressStreet1Line2\n\t, cast(json_value([AddressList],'$.Address[0].City') as varchar(255)) as AddressCity1\n\t, cast(json_value([AddressList],'$.Address[0].StateProvince') as varchar(255)) as AddressStateProvince1\n\t, cast(json_value([AddressList],'$.Address[0].Country') as varchar(255)) as AddressCountry1\n\t, cast(json_value([AddressList],'$.Address[0].PostalCode') as varchar(255)) as AddressPostalCode1\n\t, cast(json_value([AddressList],'$.Address[1].Type') as varchar(50)) as AddressType2\n\t, cast(json_value([AddressList],'$.Address[1].Role') as varchar(50)) as AddressRole2\n\t, cast(json_value([AddressList],'$.Address[1].Street.Line1') as varchar(255)) as AddressStreet2Line1\n\t, cast(json_value([AddressList],'$.Address[1].Street.Line2') as varchar(255)) as AddressStreet2Line2\n\t, cast(json_value([AddressList],'$.Address[1].City') as varchar(255)) as AddressCity2\n\t, cast(json_value([AddressList],'$.Address[1].StateProvince') as varchar(255)) as AddressStateProvince2\n\t, cast(json_value([AddressList],'$.Address[1].Country') as varchar(255)) as AddressCountry2\n\t, cast(json_value([AddressList],'$.Address[1].PostalCode') as varchar(255)) as AddressPostalCode2\n\t, cast(json_value([EmailList],'$.Email[0].Type') as varchar(2)) as TypeEmail1Description\n\t, cast(json_value([EmailList],'$.Email[0].value') as varchar(50)) as TypeEmail1\n\t, cast(json_value([EmailList],'$.Email[1].Type') as varchar(2)) as TypeEmail2Description\n\t, cast(json_value([EmailList],'$.Email[1].value') as varchar(50)) as TypeEmail2\n\t, cast(json_value([PhoneNumberList],'$.PhoneNumber[0].Type') as varchar(2)) as Telephone1TypeDescription\n\t, cast(json_value([PhoneNumberList],'$.PhoneNumber[0].Number') as varchar(50)) as Telephone1\n\t, cast(json_value([PhoneNumberList],'$.PhoneNumber[1].Type') as varchar(2)) as Telephone2TypeDescription\n\t, cast(json_value([PhoneNumberList],'$.PhoneNumber[1].Number') as varchar(50)) as Telephone2\nFROM [dbo].[vw_StaffPersonal];\n\n\n",
			"metadata": {
				"language": "sql"
			},
			"currentConnection": {
				"databaseName": "sif2",
				"poolName": "Built-in"
			},
			"resultLimit": 5000
		},
		"type": "SqlQuery"
	}
}