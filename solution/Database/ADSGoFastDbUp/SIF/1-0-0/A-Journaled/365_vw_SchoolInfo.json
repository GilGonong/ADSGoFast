{
	"name": "365_vw_SchoolInfo",
	"properties": {
		"content": {
			"query": "\nDROP VIEW IF EXISTS [dbo].[vw_SchoolInfo];\nGO\n\nCREATE VIEW [dbo].[vw_SchoolInfo]\nAS\nSELECT \n\t[RefId] AS [SchoolInfoKey]\n\t, [LocalId] AS [SchooldInfoId]\n\t, [StateProvinceId]\n\t, [CommonwealthId]\n\t, [ParentCommonwealthId]\n    , [ACARAId]\n\t, [SchoolName]\n\t, [LEAInfoRefId]\n    , JSON_VALUE([OtherLEA], '$.value') AS [OtherLEAId] \n    , JSON_VALUE([OtherLEA], '$.SIF_RefObject') AS [SIF_RefObject]\n    , [SchoolDistrict]\n    , [SchoolDistrictId]\n    , [SchoolType]\n    , [SchoolURL]\n    , JSON_VALUE([PrincipalInfo], '$.ContactName.Type') AS [PrincipalInfoType]\n    , JSON_VALUE([PrincipalInfo], '$.ContactName.Title') AS [PrincipalInfoTitle]\n    , JSON_VALUE([PrincipalInfo], '$.ContactName.FamilyName') AS [PrincipalInfoFamilyName]\n    , JSON_VALUE([PrincipalInfo], '$.ContactName.GivenName') AS [PrincipalInfoGivenName]\n    , JSON_VALUE([PrincipalInfo], '$.ContactName.MiddleName') AS [PrincipalInfoMiddleName]\n    , JSON_VALUE([PrincipalInfo], '$.ContactName.Suffix') AS [PrincipalInfoSuffix]\n    , JSON_VALUE([PrincipalInfo], '$.ContactName.FullName') AS [PrincipalInfoFullName]\n    , JSON_VALUE([PrincipalInfo], '$.ContactTitle') AS [PrincipalInfoContactTitle]\n    , JSON_VALUE([PhoneNumberList], '$.PhoneNumber[0].Number') AS [Telephone1]\n    , JSON_VALUE([PhoneNumberList], '$.PhoneNumber[0].Type') AS [Telephone1TypeDescription]\n    , JSON_VALUE([PhoneNumberList], '$.PhoneNumber[1].Number') AS [Telephone2]\n    , JSON_VALUE([PhoneNumberList], '$.PhoneNumber[1].Type') AS [Telephone2TypeDescription]\n    , [SessionType]\n    , [ARIA]\n    , [OperationalStatus]\n    , [FederalElectorate]\n    , [SchoolSector]\n    , [IndependentSchool]\n    , [NonGovSystemicStatus]\n    , [System] AS [SchoolSystemType]\n    , [ReligiousAffiliation] AS [ReligiousAfiliationGroup]\n    , [SchoolGeographicLocation]\n    , [LocalGovernmentArea]\n    , [JurisdictionLowerHouse]\n    , [SLA]\n    , [SchoolCoEdStatus]\n    , [BoardingSchoolStatus]\n    , [EntityOpen]\n    , [EntityClose]\n    , [SchoolTimeZone]\nFROM\nOPENROWSET(\nBULK 'samples/sif/SchoolInfo/SchoolInfo/Snapshot/SchoolInfo/*',\nDATA_SOURCE ='sif_eds',\nFORMAT='PARQUET'\n)\nWITH (\n    [RefId] VARCHAR(36) ,\t\n    [LocalId] VARCHAR(50)  ,\n    [StateProvinceId] VARCHAR(50)  ,\n    [CommonwealthId] VARCHAR(50)  ,\n    [ParentCommonwealthId] VARCHAR(50)  ,\n    [ACARAId] VARCHAR(50)  ,\t\t\t\t\t\n    [SchoolName] VARCHAR(255)  ,\n    [LEAInfoRefId] VARCHAR(50)  ,\t\n    [OtherLEA] VARCHAR(100)  ,\t\n    [SIF_RefObject] VARCHAR(7)  ,\t\n    [SchoolDistrict] VARCHAR(255)  ,\t\n    [SchoolDistrictId] VARCHAR(50)  ,\t\n    [SchoolType] VARCHAR(255)  ,\t\n    [SchoolURL] VARCHAR(1000)  ,\t\n    [PrincipalInfo] VARCHAR(1000)  ,\t\n    [PhoneNumberList] VARCHAR(1000)  ,\t\t\n    [SessionType] VARCHAR(4)  ,\t\n    [ARIA] VARCHAR (10),\t\n    [OperationalStatus] VARCHAR(1)  ,\t\n    [FederalElectorate] VARCHAR(3)  ,\t\n    [SchoolSector] VARCHAR(3)  ,\t\n    [IndependentSchool] VARCHAR(1)  ,\t\n    [NonGovSystemicStatus] VARCHAR(1)  ,\t\n    [System] VARCHAR(4)  ,\t\n    [ReligiousAffiliation] VARCHAR(4)  ,\t\n    [SchoolGeographicLocation] VARCHAR(10)  ,\t\n    [LocalGovernmentArea] VARCHAR(255)  ,\t\n    [JurisdictionLowerHouse] VARCHAR(255)  ,\t\n    [SLA] VARCHAR(10)  ,\t\n    [SchoolCoEdStatus] VARCHAR(1)  ,\t\n    [BoardingSchoolStatus] VARCHAR(1)  ,\t\n    [EntityOpen] VARCHAR(10)  ,\t\n    [EntityClose] VARCHAR(10)  ,\t\n    [SchoolTimeZone] VARCHAR(10)  \n) \nAS [result]\nGO\n\n\n\n",
			"metadata": {
				"language": "sql"
			},
			"currentConnection": {
				"databaseName": "sif2",
				"poolName": "Built-in"
			},
			"resultLimit": 5000
		},
		"type": "SqlQuery"
	}
}